<h1><%= @list.name %></h1>
<p><%= @list.description %></p>

<!-- Create a container div for the product list with the desired margins -->
<div class="content-container">
  <div id="product-list">
    <% @list.products_lists.each do |products_list| %>
      <div class="product-item">
        <div class="product-name"><strong><%= products_list.product.name %></strong></div>
        <div class="product-quantity">Quantity: <%= products_list.quantity %></div>
        <div class="product-price">Price (Each): <%= number_to_currency(products_list.product.price) %></div>
        <div class="product-total">Total Price: <%= number_to_currency(products_list.quantity * products_list.product.price) %></div>
      </div>
    <% end %>
  </div>

  <p><strong>Total Cost:</strong> <%= number_to_currency(@list.total_cost) %></p>

  <%= link_to 'Edit', edit_list_path(@list), class: 'btn btn-primary' %>
  <%= button_to 'Delete', list_path(@list), method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this list?' } %>
  <%= button_to 'Back to Lists', user_lists_path(@list.user), method: :get %>
</div>

<style>
  /* Import Google Fonts for handwritten style */
  @import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');

  body {
    font-family: 'Patrick Hand', sans-serif; /* Handwritten font */
    background-color: #f9f9f9; /* Off-white background to simulate paper */
    color: #333; /* Dark text for readability */
    line-height: 1.6;
    padding: 0; /* Remove default body padding */
    margin: 0;
    min-height: 100vh; /* Ensure the body takes up the full height of the viewport */
  }

  /* Ensuring the navbar isn't affected by these styles */
  nav {
    position: relative;
    z-index: 10; /* Ensure navbar stays on top of other elements */
  }

  /* Centering the main content within the new div */
  .content-container {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center everything horizontally */
    justify-content: flex-start; /* Align items at the top */
    padding: 20px;
    width: 100%;
    max-width: 1000px; /* Max width for larger screens */
    margin-left: auto;  /* Center horizontally */
    margin-right: auto; /* Center horizontally */
  }

  /* Background and texture for the product list area */
  #product-list {
    margin-top: 20px;
    background-color: #ffffff; /* White background to simulate clean paper */
    background-image: url('https://www.transparenttextures.com/patterns/soft-paper.png'); /* Subtle paper texture */
    padding: 20px;
    padding-left: 40px;  /* Add left margin */
    padding-right: 40px; /* Add right margin */
    border-radius: 8px;
    width: 100%; /* Ensure it takes up most of the width */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add a shadow for a more realistic look */
    text-align: center; /* Center all text inside the product list */
  }

  .product-item {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr; /* Create four equal columns for name, quantity, price, and total */
    gap: 20px;
    padding: 10px 0;
    border-bottom: 1px solid #ddd;
    transition: background-color 0.3s ease-in-out; /* Smooth transition on hover */
    text-align: left; /* Align text to the left */
  }

  .product-name {
    grid-column: span 4; /* Make the product name span across all four columns */
    font-weight: bold;
  }

  .product-quantity, .product-price, .product-total {
    white-space: nowrap;
  }

  .product-item.scratch-off {
    text-decoration: line-through;
    color: gray;
    background-color: #f0f0f0; /* Light background for scratched items */
  }

  .product-item:hover {
    background-color: #ffe6b3; /* Light yellow background when hovering */
    cursor: pointer;
  }

  p {
    font-size: 1.2em;
    text-align: center; /* Center the total cost text */
    font-weight: bold;
  }

  .btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-family: 'Patrick Hand', sans-serif;
    transition: all 0.3s ease-in-out;
    border: none;
    display: inline-block;
    margin-top: 10px; /* Add some space between the buttons and text */
  }

  .btn-primary {
    background-color: #4CAF50;
    color: white;
  }

  .btn-danger {
    background-color: #f44336;
    color: white;
  }

  .btn:hover {
    background-color: #ffb84d; /* Slightly lighter on hover */
  }

  button, a {
    margin-top: 10px; /* Add some space between buttons and text */
  }

  @media (max-width: 768px) {
    h1 {
      font-size: 1.4em;
      text-align: center; /* Center the title on smaller screens */
    }

    .product-item {
      font-size: 1em;
      grid-template-columns: 1fr; /* Stack the product details on top of each other on smaller screens */
    }

    .product-name {
      grid-column: span 1;
    }

    .product-quantity, .product-price, .product-total {
      font-size: 0.9em;
    }
  }
</style>

<script>
  // JavaScript for the scratch-off effect
  document.addEventListener("turbo:load", function() {
    const items = document.querySelectorAll('.product-item');
    items.forEach(item => {
      item.addEventListener('click', function() {
        this.classList.toggle('scratch-off');
      });
    });
  });
</script>
