<h1><%= @list.name %></h1>
<p><%= @list.description %></p>

<div id="product-list">
  <% @list.products_lists.each do |products_list| %>
    <div class="product-item">
      <span class="product-name"><strong><%= products_list.product.name %></strong></span>
      <span class="product-details">
        Quantity: <%= products_list.quantity %> -
        Price (Each): <%= number_to_currency(products_list.product.price) %> -
        Total Price: <%= number_to_currency(products_list.quantity * products_list.product.price) %>
      </span>
    </div>
  <% end %>
</div>

<p><strong>Total Cost:</strong> <%= number_to_currency(@list.total_cost) %></p>

<%= link_to 'Edit', edit_list_path(@list), class: 'btn btn-primary' %>
<%= button_to 'Delete', list_path(@list), method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this list?' } %>
<%= button_to 'Back to Lists', user_lists_path(@list.user), method: :get %>


<style>
  #product-list {
    margin-top: 20px;
  }

  .product-item {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 10px 0;
    border-bottom: 1px solid #ddd;
  }

  .product-name {
    max-width: 200px;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .product-details {
    white-space: nowrap;
    flex-shrink: 0;
  }

  .product-item.scratch-off {
    text-decoration: line-through;
    color: gray;
  }
</style>

<script>
  // JavaScript for the scratch-off effect 
  document.addEventListener("turbo:load", function() {
    const items = document.querySelectorAll('.product-item');
    items.forEach(item => {
      item.addEventListener('click', function() {
        this.classList.toggle('scratch-off');
      });
    });
  });
</script>
